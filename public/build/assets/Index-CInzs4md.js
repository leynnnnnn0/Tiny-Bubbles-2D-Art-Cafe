import{a as be,c as Oe,r as De,u as ze,j as s,b as Te,H as Re}from"./app-NbTgh-ZI.js";import{A as Ee}from"./app-layout-BdioireY.js";import{M as Ve}from"./module-heading-CrqDEVQz.js";import{c as Ie,d as Me,C as qe,a as Ue,b as Xe}from"./card-BFptHl29.js";import{f as Ye,D as Ge,a as Je,b as Ke,c as Qe,d as We,e as Ze}from"./dialog-Bmju38mW.js";import{B as ge}from"./button-BzJcKInx.js";import{I as Pe}from"./input-C5wJKwD7.js";import{L as fe}from"./label-C5f8oUb4.js";import{T as es}from"./textarea-BfKibzKo.js";import{S as ss,a as ts,b as rs,c as ls,d as je}from"./select-F5j0m1ly.js";import{B as Se}from"./badge-OtO5rks-.js";import{a as Y,T as is,b as as,c as os}from"./tabs-Dv5-AoGq.js";import{X as cs}from"./index-QrMlaR7T.js";import{P as Be}from"./plus-CvNKWTDu.js";import{I as Le}from"./image-BN4Rs6bZ.js";import{C as ns}from"./circle-alert-DdrI7VYK.js";/* empty css            */import"./mainLogo-bvORueui.js";import"./index-w3KtAIWx.js";import"./dropdown-menu-BsuGG8g5.js";import"./index-hP81tKwY.js";import"./index-btOhq9FW.js";import"./index-D6b3eXot.js";import"./qr-code-CDT3BVDn.js";import"./index-D2h1-WDR.js";import"./chevron-down-Cv8bRjRy.js";import"./check-zI5VOc2N.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ds=be("CircleCheckBig",ms);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],us=be("CircleX",ps);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],hs=be("Clock",xs);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],ke=be("MessageSquare",gs);function Js(c){const e=Oe.c(121),{tickets:G,counts:l,currentStatus:n}=c,[ye,J]=De.useState(!1);let K;e[0]===Symbol.for("react.memo_cache_sentinel")?(K=[],e[0]=K):K=e[0];const[m,Q]=De.useState(K);let W;e[1]===Symbol.for("react.memo_cache_sentinel")?(W=[],e[1]=W):W=e[1];let Z;e[2]===Symbol.for("react.memo_cache_sentinel")?(Z={subject:"",description:"",priority:"medium",images:W},e[2]=Z):Z=e[2];const{data:r,setData:i,processing:d,errors:o,reset:p}=ze(Z);let ee;e[3]!==r.description||e[4]!==r.images||e[5]!==r.priority||e[6]!==r.subject||e[7]!==p?(ee=t=>{t.preventDefault();const a=new FormData;a.append("subject",r.subject),a.append("description",r.description),a.append("priority",r.priority),r.images.forEach((U,X)=>{a.append(`images[${X}]`,U)}),Te.post("/business/tickets",a,{onSuccess:()=>{J(!1),p(),Q([])}})},e[3]=r.description,e[4]=r.images,e[5]=r.priority,e[6]=r.subject,e[7]=p,e[8]=ee):ee=e[8];const _e=ee;let se;e[9]!==r.images||e[10]!==m||e[11]!==i?(se=t=>{const a=Array.from(t.target.files||[]),U=[...r.images,...a];i("images",U);const X=a.map(_s);Q([...m,...X])},e[9]=r.images,e[10]=m,e[11]=i,e[12]=se):se=e[12];const ve=se;let te;e[13]!==r.images||e[14]!==m||e[15]!==i?(te=t=>{const a=r.images.filter((X,we)=>we!==t);i("images",a);const U=m.filter((X,we)=>we!==t);Q(U)},e[13]=r.images,e[14]=m,e[15]=i,e[16]=te):te=e[16];const Ne=te,$e=ys,Fe=bs,Ae=js,He=fs;let re;e[17]===Symbol.for("react.memo_cache_sentinel")?(re=s.jsx(Re,{title:"Tickets"}),e[17]=re):re=e[17];let le;e[18]===Symbol.for("react.memo_cache_sentinel")?(le=s.jsx(Ve,{title:"Tickets",description:"Manage your support tickets here."}),e[18]=le):le=e[18];let ie;e[19]===Symbol.for("react.memo_cache_sentinel")?(ie=s.jsx(Ye,{asChild:!0,children:s.jsxs(ge,{children:[s.jsx(Be,{className:"h-4 w-4 mr-2"}),"Create Ticket"]})}),e[19]=ie):ie=e[19];let ae;e[20]===Symbol.for("react.memo_cache_sentinel")?(ae=s.jsxs(Ge,{children:[s.jsx(Je,{children:"Create New Ticket"}),s.jsx(Ke,{children:"Submit a support ticket and we'll get back to you as soon as possible."})]}),e[20]=ae):ae=e[20];let oe;e[21]===Symbol.for("react.memo_cache_sentinel")?(oe=s.jsx(fe,{htmlFor:"subject",children:"Subject"}),e[21]=oe):oe=e[21];let u;e[22]!==i?(u=t=>i("subject",t.target.value),e[22]=i,e[23]=u):u=e[23];let x;e[24]!==r.subject||e[25]!==u?(x=s.jsx(Pe,{id:"subject",value:r.subject,onChange:u,placeholder:"Brief description of the issue"}),e[24]=r.subject,e[25]=u,e[26]=x):x=e[26];let h;e[27]!==o.subject?(h=o.subject&&s.jsx("p",{className:"text-sm text-red-500",children:o.subject}),e[27]=o.subject,e[28]=h):h=e[28];let g;e[29]!==x||e[30]!==h?(g=s.jsxs("div",{className:"grid gap-2",children:[oe,x,h]}),e[29]=x,e[30]=h,e[31]=g):g=e[31];let ce;e[32]===Symbol.for("react.memo_cache_sentinel")?(ce=s.jsx(fe,{htmlFor:"priority",children:"Priority"}),e[32]=ce):ce=e[32];let f;e[33]!==i?(f=t=>i("priority",t),e[33]=i,e[34]=f):f=e[34];let ne;e[35]===Symbol.for("react.memo_cache_sentinel")?(ne=s.jsx(ts,{children:s.jsx(rs,{})}),e[35]=ne):ne=e[35];let me;e[36]===Symbol.for("react.memo_cache_sentinel")?(me=s.jsxs(ls,{children:[s.jsx(je,{value:"low",children:"Low"}),s.jsx(je,{value:"medium",children:"Medium"}),s.jsx(je,{value:"high",children:"High"}),s.jsx(je,{value:"urgent",children:"Urgent"})]}),e[36]=me):me=e[36];let j;e[37]!==r.priority||e[38]!==f?(j=s.jsxs(ss,{value:r.priority,onValueChange:f,children:[ne,me]}),e[37]=r.priority,e[38]=f,e[39]=j):j=e[39];let b;e[40]!==o.priority?(b=o.priority&&s.jsx("p",{className:"text-sm text-red-500",children:o.priority}),e[40]=o.priority,e[41]=b):b=e[41];let y;e[42]!==j||e[43]!==b?(y=s.jsxs("div",{className:"grid gap-2",children:[ce,j,b]}),e[42]=j,e[43]=b,e[44]=y):y=e[44];let de;e[45]===Symbol.for("react.memo_cache_sentinel")?(de=s.jsx(fe,{htmlFor:"description",children:"Description"}),e[45]=de):de=e[45];let _;e[46]!==i?(_=t=>i("description",t.target.value),e[46]=i,e[47]=_):_=e[47];let v;e[48]!==r.description||e[49]!==_?(v=s.jsx(es,{id:"description",value:r.description,onChange:_,placeholder:"Provide detailed information about your issue...",rows:5}),e[48]=r.description,e[49]=_,e[50]=v):v=e[50];let N;e[51]!==o.description?(N=o.description&&s.jsx("p",{className:"text-sm text-red-500",children:o.description}),e[51]=o.description,e[52]=N):N=e[52];let C;e[53]!==v||e[54]!==N?(C=s.jsxs("div",{className:"grid gap-2",children:[de,v,N]}),e[53]=v,e[54]=N,e[55]=C):C=e[55];let pe;e[56]===Symbol.for("react.memo_cache_sentinel")?(pe=s.jsx(fe,{htmlFor:"images",children:"Attachments (Optional)"}),e[56]=pe):pe=e[56];let w;e[57]!==ve?(w=s.jsx(Pe,{id:"images",type:"file",accept:"image/*",multiple:!0,onChange:ve,className:"cursor-pointer"}),e[57]=ve,e[58]=w):w=e[58];let ue;e[59]===Symbol.for("react.memo_cache_sentinel")?(ue=s.jsx(Le,{className:"h-5 w-5 text-muted-foreground"}),e[59]=ue):ue=e[59];let S;e[60]!==w?(S=s.jsxs("div",{className:"flex items-center gap-2",children:[w,ue]}),e[60]=w,e[61]=S):S=e[61];let xe;e[62]===Symbol.for("react.memo_cache_sentinel")?(xe=s.jsx("p",{className:"text-xs text-muted-foreground",children:"You can upload multiple images (max 5MB each)"}),e[62]=xe):xe=e[62];let T;e[63]!==m||e[64]!==Ne?(T=m.length>0&&s.jsx("div",{className:"grid grid-cols-3 gap-2 mt-2",children:m.map((t,a)=>s.jsxs("div",{className:"relative group",children:[s.jsx("img",{src:t,alt:`Preview ${a+1}`,className:"w-full h-24 object-cover rounded border"}),s.jsx("button",{type:"button",onClick:()=>Ne(a),className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx(cs,{className:"h-3 w-3"})})]},a))}),e[63]=m,e[64]=Ne,e[65]=T):T=e[65];let k;e[66]!==S||e[67]!==T?(k=s.jsxs("div",{className:"grid gap-2",children:[pe,S,xe,T]}),e[66]=S,e[67]=T,e[68]=k):k=e[68];let D;e[69]!==g||e[70]!==y||e[71]!==C||e[72]!==k?(D=s.jsxs("div",{className:"grid gap-4 py-4",children:[g,y,C,k]}),e[69]=g,e[70]=y,e[71]=C,e[72]=k,e[73]=D):D=e[73];let I;e[74]!==p?(I=()=>{J(!1),p(),Q([])},e[74]=p,e[75]=I):I=e[75];let M;e[76]!==d||e[77]!==I?(M=s.jsx(ge,{type:"button",variant:"outline",onClick:I,disabled:d,children:"Cancel"}),e[76]=d,e[77]=I,e[78]=M):M=e[78];const Ce=d?"Creating...":"Create Ticket";let P;e[79]!==d||e[80]!==Ce?(P=s.jsx(ge,{type:"submit",disabled:d,children:Ce}),e[79]=d,e[80]=Ce,e[81]=P):P=e[81];let B;e[82]!==M||e[83]!==P?(B=s.jsxs(Qe,{children:[M,P]}),e[82]=M,e[83]=P,e[84]=B):B=e[84];let L;e[85]!==_e||e[86]!==D||e[87]!==B?(L=s.jsx(We,{className:"sm:max-w-[600px]",children:s.jsxs("form",{onSubmit:_e,children:[ae,D,B]})}),e[85]=_e,e[86]=D,e[87]=B,e[88]=L):L=e[88];let $;e[89]!==ye||e[90]!==L?($=s.jsxs("div",{className:"flex justify-between items-start",children:[le,s.jsxs(Ze,{open:ye,onOpenChange:J,children:[ie,L]})]}),e[89]=ye,e[90]=L,e[91]=$):$=e[91];let F;e[92]!==l.all?(F=s.jsxs(Y,{value:"all",children:["All (",l.all,")"]}),e[92]=l.all,e[93]=F):F=e[93];let A;e[94]!==l.open?(A=s.jsxs(Y,{value:"open",children:["Open (",l.open,")"]}),e[94]=l.open,e[95]=A):A=e[95];let H;e[96]!==l.in_progress?(H=s.jsxs(Y,{value:"in_progress",children:["In Progress (",l.in_progress,")"]}),e[96]=l.in_progress,e[97]=H):H=e[97];let O;e[98]!==l.resolved?(O=s.jsxs(Y,{value:"resolved",children:["Resolved (",l.resolved,")"]}),e[98]=l.resolved,e[99]=O):O=e[99];let z;e[100]!==l.closed?(z=s.jsxs(Y,{value:"closed",children:["Closed (",l.closed,")"]}),e[100]=l.closed,e[101]=z):z=e[101];let R;e[102]!==F||e[103]!==A||e[104]!==H||e[105]!==O||e[106]!==z?(R=s.jsxs(is,{className:"grid w-full grid-cols-5",children:[F,A,H,O,z]}),e[102]=F,e[103]=A,e[104]=H,e[105]=O,e[106]=z,e[107]=R):R=e[107];let E;e[108]!==n||e[109]!==G?(E=G.length===0?s.jsx(Ie,{children:s.jsxs(Me,{className:"flex flex-col items-center justify-center py-12",children:[s.jsx(ke,{className:"h-12 w-12 text-muted-foreground mb-4"}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No tickets found"}),s.jsx("p",{className:"text-muted-foreground text-center mb-4",children:n==="all"?"You haven't created any tickets yet.":`No ${n.replace("_"," ")} tickets.`}),s.jsxs(ge,{onClick:()=>J(!0),children:[s.jsx(Be,{className:"h-4 w-4 mr-2"}),"Create Your First Ticket"]})]})}):s.jsx("div",{className:"grid gap-4",children:G.map(t=>s.jsxs(Ie,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:()=>Te.visit(`/business/tickets/${t.id}`),children:[s.jsx(qe,{children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"space-y-1 flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ue,{className:"text-lg",children:t.subject}),t.has_images&&s.jsx(Le,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Xe,{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-mono text-xs",children:t.ticket_number}),s.jsx("span",{children:"â€¢"}),s.jsx("span",{children:t.created_at})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Se,{variant:"outline",className:He(t.priority_color),children:t.priority}),s.jsxs(Se,{variant:"outline",className:`flex items-center gap-1 ${Ae(t.status_color)}`,children:[Fe(t.status),t.status.replace("_"," ")]})]})]})}),s.jsxs(Me,{children:[s.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-4",children:t.description}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[s.jsx(ke,{className:"h-4 w-4"}),s.jsxs("span",{children:[t.replies_count," ",t.replies_count===1?"reply":"replies"]})]}),t.last_reply&&s.jsxs("div",{className:"text-xs text-muted-foreground",children:["Last reply: ",t.last_reply.created_at,t.last_reply.is_staff&&s.jsx(Se,{variant:"outline",className:"ml-2 text-xs",children:"Staff"})]})]})]})]},t.id))}),e[108]=n,e[109]=G,e[110]=E):E=e[110];let V;e[111]!==n||e[112]!==E?(V=s.jsx(as,{value:n,className:"mt-6",children:E}),e[111]=n,e[112]=E,e[113]=V):V=e[113];let q;e[114]!==n||e[115]!==R||e[116]!==V?(q=s.jsxs(os,{value:n,onValueChange:$e,children:[R,V]}),e[114]=n,e[115]=R,e[116]=V,e[117]=q):q=e[117];let he;return e[118]!==$||e[119]!==q?(he=s.jsxs(Ee,{children:[re,s.jsxs("div",{className:"space-y-6",children:[$,q]})]}),e[118]=$,e[119]=q,e[120]=he):he=e[120],he}function fs(c){const e={gray:"bg-gray-100 text-gray-800 border-gray-200",blue:"bg-blue-100 text-blue-800 border-blue-200",orange:"bg-orange-100 text-orange-800 border-orange-200",red:"bg-red-100 text-red-800 border-red-200"};return e[c]||e.gray}function js(c){const e={blue:"bg-blue-100 text-blue-800 border-blue-200",yellow:"bg-yellow-100 text-yellow-800 border-yellow-200",green:"bg-green-100 text-green-800 border-green-200",gray:"bg-gray-100 text-gray-800 border-gray-200"};return e[c]||e.gray}function bs(c){switch(c){case"open":return s.jsx(ns,{className:"h-4 w-4"});case"in_progress":return s.jsx(hs,{className:"h-4 w-4"});case"resolved":return s.jsx(ds,{className:"h-4 w-4"});case"closed":return s.jsx(us,{className:"h-4 w-4"});default:return s.jsx(ke,{className:"h-4 w-4"})}}function ys(c){Te.get("/business/tickets",{status:c},{preserveState:!0})}function _s(c){return URL.createObjectURL(c)}export{Js as default};
